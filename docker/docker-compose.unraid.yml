# SmarTunarr - Docker Compose for Unraid
# Place this file in /boot/config/plugins/compose.manager/projects/smartunarr/
# Or use it with: docker-compose -f docker-compose.unraid.yml up -d

services:
  smartunarr:
    image: sharkhunterr/smartunarr:latest
    container_name: smartunarr
    ports:
      - "3000:3000"  # Web UI (Frontend)
      - "4273:4273"  # Backend API
    environment:
      # Database
      - DATABASE_URL=sqlite+aiosqlite:////app/data/smartunarr.db
      # Logging
      - LOG_LEVEL=INFO
      # CORS - add your Unraid IP if needed
      - CORS_ORIGINS=["http://localhost:3000","http://192.168.1.0/24:3000"]
      # Optional: Set timezone
      - TZ=Europe/Paris
    volumes:
      # Persistent data storage in appdata
      - /mnt/user/appdata/smartunarr/data:/app/data
    networks:
      - smartunarr-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:4273/api/v1/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 30s
    labels:
      - "net.unraid.docker.icon=https://raw.githubusercontent.com/sharkhunterr/smartunarr/master/docs/screenshots/icon.png"
      - "net.unraid.docker.webui=http://[IP]:[PORT:3000]/"
      - "net.unraid.docker.managed=compose"

networks:
  smartunarr-network:
    name: smartunarr-network
    driver: bridge

# =============================================================================
# PORTS REFERENCE
# =============================================================================
# 3000 - Web UI (Frontend) - Main interface
# 4273 - Backend API - REST API
#
# =============================================================================
# VOLUMES REFERENCE
# =============================================================================
# /mnt/user/appdata/smartunarr/data - SQLite database, logs, backups
#
# =============================================================================
# USAGE
# =============================================================================
# 1. Create directory: mkdir -p /mnt/user/appdata/smartunarr/data
# 2. Start: docker-compose -f docker-compose.unraid.yml up -d
# 3. Access: http://YOUR_UNRAID_IP:3000
#
# =============================================================================
